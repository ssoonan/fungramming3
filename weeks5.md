# 5주차 - Flask와 확장, DB, Heroku, AWS, SSL

## 공부한 것

### Flask

전체적으로 다 훑어봤고, 어떤 식으로 웹앱이 동작하는 지도 이해했으니, 앞에서부터 다시 훑어보며 내용 정리함. 
- context라는 걸 이용하여 글로벌 변수인것처럼 각 스레드들을 판별할 수 있다 
- view함수가 하는 일은 결국, request를 받고 어떻게 response를 처리할 것인지에 따른 비즈니스 로직
- templates은 이 비즈니스 로직을 클라이언트에게 어떻게 보여줄 것이냐를 따지는 프레젠테이션 로직
- flask-migrate를 이용하지 않으면, DB 구조가 바뀔 때마다 DB를 삭제 후 만드는 방법 밖에 없으며, 이를 관리하기 위해 flask-migrate를 쓴다. migrate로 변화를 탐지하고, upgrade로 버전을 올린다. git처럼 각 revision을 볼 수도, 이동할 수도 있다.

### Flask 확장

기존 flask 책에 있던 확장에 더불어 여러 확장들을 더 공부함.

flask-security : 기존 flask-login보다 강화된 보안을 제공. 비밀번호 해싱을 두 번 및 여러 config를 제공함으로써 보안 강화가 가능.
flask-admin : 각 사이트의 관리자 역할을 할 수 있는 웹앱 만들기를 쉽게 하는 인터페이스를 제공. DB만 확장에 넣어주면 DB를 GUI 환경으로 제어가능하다.

### Heroku, AWS

Heroku는 PaaS, 웹앱을 배포할 수 있는 플랫폼을 제공한다. 서버는 AWS위에서 돌아가며, 배포에 필요한 여러 가지 설정을 미리 세팅했고, 필요에 따라, 언제든지 적용가능하다. 이 PaaS를 통해 웹앱 배포가 매우 쉬워짐!
AWS의 EC2는 IaaS. 제일 밑바탕이 되는 인프라를 제공해줄 뿐이다. CPU, RAM 등을 골라 각 소프트웨어에 필요한 환경을 설정하는 것일뿐. 애초에 Heroku랑 비교 대상이 아니다. 물론 AWS에도 PaaS인 AWS Elastic Beanstalk이 있다고는 한다. 하지만 이번 픽스팟에서는 GCP를 쓴다고 하니 공부 괜히 했다.


### DB

- DB 모델링은 어떻게 하는가? 요구사항 분석 - 수집 및 분석 - 설계이고, 설계는 개념적 모델링 / 논리적 모델링 / 물리적 모델링으로 이루어진다.
- 논리적 모델링을 통해 각 값들을, 개체 타입, 관계 타입, 속성으로 나눈 뒤, 실제 개념으로 사상시킨다.
- index를 필요한 열에 넣음으로써, query의 검색 기능을 훨씬 더 빠르게 할 수 있다. (거의 SELECT의 WHERE) 하지만 그만큼 부하가 걸리기에 검색이 아닌, 수정과 삭제가 자주 일어나는 컬럼에 적용하면 오히려 효과가 저하된다. 필요한 곳에만 쓰자
- RDBMS에서의 index는 query 검색 기능을 빠르게 하는 기능이고, elasticsearch의 index는 그 자체로 한 묶음을 의미. 의미가 다르다.
- 이상현상 : 걍 막 데이터베이스 만들어 데이터를 넣으면, 수정,삭제 시에 여러 문제가 생긴다. 그렇기에 정규화 과정이 필요하다.
#### 1정규형
모든 값들을 atomic하게 만들기

#### 2정규형
기본키를 단일, 복합키면 그 부분이 또 결정자가 되지 않게끔 분리하기

#### 3정규형
기본키가 아닌 키가 결정자 역할을 할 수 없게끔 분리하기

이 정규화에 맞춰 DB를 설계한 후, join을 통해 DB연산을 처리하면 더 효율적이다!

## 계획

### flask 
- flask-admin, flask-security를 활용 admin 사이트 만들어보기

### ES
- ES를 통한 검색 기능이 필요. ES 공부 & 어떻게 flask에 붙일 수 있는 가 공부하기

### GCP
- 어떻게 웹앱을 연동할 수 있는가 공부해보기